jQuery(document).ready(function($){function e(e,t){e.filter(function(){var e=this.getBoundingClientRect();return e.top>=0&&e.top<=window.innerHeight}).trigger(t)}function t(e){var t=0,i=[],n=[];for(var o in e){n.push(e[o].join(" "));var a=e[o];if(a.length){if(0===t)i=a.slice(0);else{for(var s=[],l=i.slice(0),r=0,c=a.length;c>r;r++)for(var u=0,h=l.length;h>u;u++)s.push(l[u]+a[r]);i=s}t++}}var d=i.join(", ");return d}function i(e){var t=e[0],i=e.parents(".option-set").attr("data-group"),n=r[i];n||(n=r[i]=[]);var o=$.inArray(t.value,n);t.checked?-1===o&&r[i].push(t.value):r[i].splice(o,1)}function n(e){for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return e}function o(e){$(".item").each(function(){$(this).addClass("active")}),$(e).removeClass("active")}var a=$(window),s=$("img.ll"),l=$(".listing");a.on("scroll",function(){e(s,"lazylazy")}),s.lazyload({effect:"fadeIn",failure_limit:Math.max(s.length-1,0),event:"lazylazy"});var r={},c=$("#filter-display");$("input[type=checkbox]").each(function(){i($(this))});var u=t(r);console.log(u),l.isotope({filter:u}),c.text(u),$(".filters-menu").on("change",function(e){var n=$(e.target);i(n);var o=t(r);l.isotope({filter:o}),c.text(o)}),$(".filters").on("click","button",function(){var e=$(this).attr("data-filter");changeClasses($(this)),window.location.hash=e,isotopeFilter(e),$("html, body").animate({scrollTop:0},"fast")}),changeClasses=function(e){"filter-showall"==$(e).attr("id")?$(e).hasClass("hidden")?$(e).removeClass("hidden"):$(e).addClass("hidden").delay(200).queue(function(t){$(e).addClass("displayNone").dequeue()}):$("#filter-showall").removeClass("hidden displayNone"),$(".filters button").removeClass("active"),$(e).addClass("active")};var h=function(){var e=l.width(),t=1,i=0;return e>1600?t=4:e>1200?t=4:e>992?t=3:e>768?t=3:e>480&&(t=1),i=Math.floor(e/t),l.find(".item").each(function(){var e=$(this),t=e.attr("class").match(/item-w(\d)/),n=e.attr("class").match(/item-h(\d)/),o=t?i*t[1]:i,a=n?i*n[1]*.66666:.66666*i;e.css({width:o,height:a})}),i};isotope=function(){l.isotope({itemSelector:".item",masonry:{columnWidth:h()}})},isotopeFilter=function(e){console.log("isotope filter : "+e),l.isotope({filter:e})},hash=window.location.hash.substr(1),isotope(),hash&&(console.log("hash : "+hash),isotopeFilter(hash),$(".filters").find("button").each(function(){$(this).attr("data-filter")==hash&&changeClasses($(this))})),a.on("debouncedresize",isotope),l.isotope("on","layoutComplete",function(){e(s,"lazylazy")});var d=[];l.find(".item").each(function(){d.push($(this))});for(var f=0;f<d.length;f++){var v=250*f;d[f].delay(v).queue(function(e){$(this).addClass("loaded").dequeue()})}$(".overview").length&&($(".no-touch").find(".item").on("mouseover",function(){o($(this))}),$(".no-touch").find(".item").on("mouseout",function(){$(".item").each(function(){$(this).removeClass("active")})})),$(".button-filters").on("click",function(e){console.log("click on filters"),e.preventDefault(),$(".filters-menu").hasClass("closed")?$(".filters-menu").removeClass("hidden").delay(10).queue(function(e){$(".filters-menu").removeClass("closed").dequeue()}):$(".filters-menu").addClass("closed").delay(200).queue(function(e){$(".filters-menu").addClass("hidden").dequeue()})})}),$(window).resize(function(){});